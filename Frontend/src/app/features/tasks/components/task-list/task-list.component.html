<div class="task-list">
  <div class="list-header">
    <div class="header-cell">Task</div>
    <div class="header-cell">Priority</div>
    <div class="header-cell">Status</div>
    <div class="header-cell">Due Date</div>
    <div class="header-cell">Actions</div>
  </div>

  @if (!tasksWithMetadata() || tasksWithMetadata().length === 0) {
    <div class="empty-list">
      <p>No tasks found matching your criteria.</p>
    </div>
  }

  @for (task of tasksWithMetadata(); track task.id) {
    <div class="task-row" (click)="onTaskSelect(task)">
      <div class="task-cell task-info">
        <h4 class="task-title">{{ task.title }}</h4>
        @if (task.description) {
          <p class="task-description">{{ task.description }}</p>
        }
      </div>

      <div class="task-cell">
        <span class="priority-badge" [class]="'priority-' + task.priority.toLowerCase()">
          {{ task.priority }}
        </span>
      </div>

      <div class="task-cell">
        <span class="status-badge" [class]="'status-' + task.status.toLowerCase()">
          {{ task.statusLabel }}
        </span>
      </div>



      <div class="task-cell">
        @if (task.dueDate) {
          <span [class.overdue]="task.isOverdue">
            {{ task.dueDate | date }}
          </span>
        } @else {
          <span>-</span>
        }
      </div>

      <div class="task-cell actions-cell" (click)="$event.stopPropagation()">
        <button
          class="btn btn-sm"
          (click)="onEdit(task)">
          ✏️
        </button>
        <button
          class="btn btn-sm btn-danger"
          (click)="onDelete(task.id)">
          🗑️
        </button>
      </div>
    </div>
  }
</div>
